#!/usr/bin/env bash

# Battery icons in ascending order
icons=("" "" "" "" "")
charging_icon=""

# Get the battery status and percentage
status=$(acpi -b | cut -d ',' -f1 | awk '{print $NF}')
percentage=$(acpi -b | cut -d ',' -f2 | tr -d '[:space:]%')

# Determine if the battery is charging
if [[ "$status" == *"Charging"* ]]; then
  # Show charging icon and percentage
  echo "$charging_icon  $percentage%"
else
  # Determine the icon index based on the battery percentage
  if [[ "$percentage" -le 20 ]]; then
    icon=${icons[0]}
  elif [[ "$percentage" -le 40 ]]; then
    icon=${icons[1]}
  elif [[ "$percentage" -le 60 ]]; then
    icon=${icons[2]}
  elif [[ "$percentage" -le 80 ]]; then
    icon=${icons[3]}
  else
    icon=${icons[4]}
  fi

  # Output the icon and the percentage
  echo "$icon  $percentage%"
fi
